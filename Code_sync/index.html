<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Code sync &mdash; Real-life compute cluster workflows  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css" />
      <link rel="stylesheet" type="text/css" href="../_static/term_role_formatting.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />

  
    <link rel="shortcut icon" href="../_static/coderefinery.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/minipres.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Graphical interfaces" href="../GUIs/" />
    <link rel="prev" title="Data sync" href="../Data_sync/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Real-life compute cluster workflows
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The lesson</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Motivation/">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Project_arrangement/">Project arrangement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Data_sync/">Data sync</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code sync</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introductions">Introductions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setup-steps">Setup steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#actual-workflow">Actual workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../GUIs/">Graphical interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Working_interactively/">Working interactively (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VSCode/">VSCode</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../instructor-guide/">Instructor’s guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Real-life compute cluster workflows</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Code sync</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/coderefinery/content/blob/main/content/Code_sync.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="code-sync">
<h1>Code sync<a class="headerlink" href="#code-sync" title="Permalink to this heading"></a></h1>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Keep a backup copy of your code</p></li>
<li><p>A workflow for coding on a cluster</p></li>
</ul>
</div>
<section id="introductions">
<h2>Introductions<a class="headerlink" href="#introductions" title="Permalink to this heading"></a></h2>
<p>In the previous section we talked about syncing data.
Most of the lessong there apply to this code as well, but
there are some differences. Mainly, code changes more
quickly than data and needs to be synced more often.</p>
<p>You might also want to do most of your coding work locally,
instead of coding on the cluster. There you will have all
your favorite tools available and can be more productive.</p>
<p>We will demonstrate a workflow for keeping your code in
sync between a laptop and a cluster using git. On both
systems, we will push the code to a cloud server and pull
updates from there. This
workflow comes with a great benefit, it keeps an online
backup of the code up to date.</p>
<p>You can use any cloud service that supports git, or even
set up your own repository on a server you have ssh acces
to.</p>
</section>
<section id="setup-steps">
<h2>Setup steps<a class="headerlink" href="#setup-steps" title="Permalink to this heading"></a></h2>
<ol class="arabic">
<li><p><strong>Set up a cloud repository</strong>: Create a repository on
a cloud service like GitHub, GitLab, or Bitbucket.
Clone it and add your code.</p>
<p>If you are not familiar with this part, Coderefinery has
<a class="reference external" href="https://coderefinery.github.io/git-intro/">excellent lessons</a>
on git and related workflows.</p>
</li>
<li><p><strong>Clone to the repository</strong>: Clone the repository to on the
cluster</p></li>
</ol>
<div class="admonition-cloning-the-repository-for-the-demo demo admonition" id="demo-0">
<p class="admonition-title">Cloning the repository for the demo</p>
<ul class="simple">
<li><p>On both local and cluster</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:coderefinery/ttt4hpc-io-examples.git
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>ttt4hpc-io-examples/R_example/
</pre></div>
</div>
</div>
</section>
<section id="actual-workflow">
<h2>Actual workflow<a class="headerlink" href="#actual-workflow" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Pull from the cloud</strong>: Before you start coding, pull
the latest version of the code from the cloud.</p></li>
<li><p><strong>Make a change</strong>: work on your code. Run any tests
you can run locally.</p></li>
<li><p><strong>Commit and push</strong>: While working, create periodic
commits and push them to the cloud.</p></li>
<li><p><strong>Pull on the cluster</strong>: Pull the changes to the cluster
to run tests of benchmarks.</p></li>
</ol>
<div class="admonition-git-workflow demo admonition" id="demo-1">
<p class="admonition-title">Git workflow</p>
<ul class="simple">
<li><p>On laptop</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>pull
</pre></div>
</div>
<ul class="simple">
<li><p>Fix the script, test and commit</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>Rscript<span class="w"> </span>n_growing.R
<span class="gp">$ </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;message&quot;</span>
<span class="gp">$ </span>git<span class="w"> </span>push
</pre></div>
</div>
<ul class="simple">
<li><p>Test, benchmark and run on the cluster</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>pull
<span class="gp">$ </span>Rscript<span class="w"> </span>n_growing.R
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>The main downside of the this workflow is that you cannot
test or benchmark your code where you edit it. You can
still edit on the cluster side, just commit and push
before moving back to the local repository.</p></li>
</ul>
<div class="admonition-homework-code-sync exercise important admonition" id="exercise-0">
<p class="admonition-title">Homework: Code Sync</p>
<ol class="arabic simple">
<li><p><strong>Code Sync</strong></p>
<ul class="simple">
<li><p>Clone a git repository on the cluster and your local machine</p></li>
<li><p>Make an edit on the local machine and push it to the cloud</p></li>
<li><p>Pull the changes on the cluster</p></li>
</ul>
</li>
</ol>
</div>
<div class="admonition-homework-code-rsync exercise important admonition" id="exercise-1">
<p class="admonition-title">Homework: Code Rsync</p>
<ol class="arabic simple">
<li><p><strong>Code Rsync</strong></p>
<ul class="simple">
<li><p>Copy a git repository to the cluster using <code class="docutils literal notranslate"><span class="pre">rsync</span> <span class="pre">-r</span> <span class="pre">repository</span> <span class="pre">user&#64;cluster:</span></code></p></li>
</ul>
</li>
<li><p>For your homework, write some reflections on:</p>
<ul class="simple">
<li><p>Is this different from a clone?</p></li>
<li><p>What are the advantages and disadvantages of this method?</p></li>
<li><p>Can you still push to a remote repository?</p></li>
</ul>
</li>
</ol>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>A simple workflow that using git</p></li>
<li><p>Keeps an online backup up to date</p></li>
<li><p>Extra steps when testing on a cluster</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Data_sync/" class="btn btn-neutral float-left" title="Data sync" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../GUIs/" class="btn btn-neutral float-right" title="Graphical interfaces" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024-, The contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data sync &mdash; Real-life compute cluster workflows  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css" />
      <link rel="stylesheet" type="text/css" href="../_static/term_role_formatting.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />

  
    <link rel="shortcut icon" href="../_static/coderefinery.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/minipres.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Code sync" href="../Code_sync/" />
    <link rel="prev" title="Project arrangement" href="../Project_arrangement/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Real-life compute cluster workflows
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The lesson</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Motivation/">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Project_arrangement/">Project arrangement</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data sync</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#making-a-data-plan">Making a data plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-data-plan-for-a-distributed-project">Example data plan for a distributed project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transferring-data">Transferring data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rsync-smart-file-transfer">rsync: smart file transfer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#syncing-data-two-ways">Syncing data two-ways</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#unison-syncing-data">Unison: syncing data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-unison">Using unison</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#git-annex">git-annex</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mounting-data-from-place-to-place">Mounting data from place to place</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Code_sync/">Code sync</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GUIs/">Graphical interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Working_interactively/">Working interactively (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VSCode/">VSCode</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../instructor-guide/">Instructor’s guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Real-life compute cluster workflows</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Data sync</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/coderefinery/content/blob/main/content/Data_sync.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-sync">
<h1>Data sync<a class="headerlink" href="#data-sync" title="Permalink to this heading"></a></h1>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Make a data plan before you start: plan for the syncing you may need</p></li>
<li><p>You may need syncing for computing in multiple places, or for
setup/backup.</p></li>
<li><p>You can transfer data and make two copies.</p></li>
<li><p>You can mount data and use it from place to place</p></li>
</ul>
</div>
<section id="making-a-data-plan">
<h2>Making a data plan<a class="headerlink" href="#making-a-data-plan" title="Permalink to this heading"></a></h2>
<p>Make a plan before you start!  <em>Syncing everything to everywhere will
result in unmanageable copies.</em></p>
<ol class="arabic simple">
<li><p>Getting original data, making a <strong>copy for analysis</strong></p></li>
<li><p><strong>Archiving data</strong> after you are done</p></li>
<li><p><strong>Moving</strong> data from place to place, <em>during</em> the project,</p></li>
<li><p>same as (3) but and <em>it may even be updated on both sides at the
same time.</em></p></li>
</ol>
<p>The first three are common and relatively easy, the last requires a
lot of care!</p>
<p>Consider:</p>
<ul class="simple">
<li><p><strong>There are different kinds of data</strong>.  Some can be re-constructed,
some must be made from scratch each time.</p></li>
<li><p><strong>Storage spaces have different properties</strong>: Some are good for
being same for archival.  Some are fast for analysis.  Not many are
good at both at the same time.</p></li>
<li><p>Will data be updated in multiple places, or in only one place at a
time?</p></li>
</ul>
</section>
<section id="example-data-plan-for-a-distributed-project">
<h2>Example data plan for a distributed project<a class="headerlink" href="#example-data-plan-for-a-distributed-project" title="Permalink to this heading"></a></h2>
<div class="admonition-demo demo admonition" id="demo-0">
<p class="admonition-title">Demo</p>
<p>Our project uses a lot of computational resources, so we might run
simulations on multiple clusters.  Data may be created on any, so we
need to carefully manage our data.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">project</span></code>: the main code of the project.  It is always synced with
git.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">project-data/</span></code>: The data for our project.  The code accesses this
data by using <code class="docutils literal notranslate"><span class="pre">../project-data/...</span></code>.  This is synced manually.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">input/</span></code>: Our input data.  Data is <em>only</em> added on our
workstation, syncing is always from the workstation to other
computer clusters.  Input data should never be modified, but if it
has to be, it’s modified on the workstation and then re-synced.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">computed/NNN/</span></code>: This is the computed data on any cluster.  Each
<code class="docutils literal notranslate"><span class="pre">NNN</span></code> is only computed on one cluster, and that is the only
cluster should modify the <code class="docutils literal notranslate"><span class="pre">computed/NNN</span></code> files.  This data is only
synced from cluster → workstation (and only the workstation has
the complete view on everything).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">analyzed/</span></code>: contains the final analysis that combines all of the
data.  This isn’t very hard, so is always run on my local
workstation so I can develop quickly.</p></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="transferring-data">
<h2>Transferring data<a class="headerlink" href="#transferring-data" title="Permalink to this heading"></a></h2>
<p>Transfering data is relatively easy.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ssh</span></code> is the standard transport, and <code class="docutils literal notranslate"><span class="pre">scp</span></code>, <code class="docutils literal notranslate"><span class="pre">sftp</span></code>, <code class="docutils literal notranslate"><span class="pre">rsync</span></code>, and
more all use <code class="docutils literal notranslate"><span class="pre">ssh</span></code>.</p>
<ul>
<li><p>Set up a <a class="reference external" href="https://scicomp.aalto.fi/scicomp/ssh/#ssh-config">SSH config file</a>.</p></li>
</ul>
</li>
<li><p>When data is super-massive, there are other protocols, but you’ll
learn them if you need them.</p></li>
<li><p>If you get two copies, you have to be careful <em>they don’t get out of
sync and you have to merge them together again</em>.</p></li>
</ul>
<section id="rsync-smart-file-transfer">
<h3>rsync: smart file transfer<a class="headerlink" href="#rsync-smart-file-transfer" title="Permalink to this heading"></a></h3>
<p>Rsync transfers files, but does so smartly:</p>
<ul class="simple">
<li><p>If only some parts of the file are changed, only transfer those
parts.</p></li>
<li><p>Resume interrupted transfers.</p></li>
<li><p>Mirror entire directory trees, including options for permissions,
timestamps, deleting files, etc.</p></li>
</ul>
<p>Basic usage:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rsync<span class="w"> </span>FILE_OR_DIRECTORY<span class="w"> </span>HOST:FILE_OR_DIRECTORY
</pre></div>
</div>
<p>There are many options for almost any problem you may have:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-r</span></code>: Recursive</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-t</span></code>: Preserve timestamps</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-a</span></code>: Mirror everything fully (includes <code class="docutils literal notranslate"><span class="pre">-r</span></code> and <code class="docutils literal notranslate"><span class="pre">-t</span></code>)</p></li>
<li><p>Recommendation: <code class="docutils literal notranslate"><span class="pre">-a</span></code> is usually good, but <code class="docutils literal notranslate"><span class="pre">-rt</span></code> may be good on
clusters where you can’t (or don’t want to) preserve users, groups,
and permissions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span></code> and <code class="docutils literal notranslate"><span class="pre">-i</span></code> print out more information on exactly what is being
transferred</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-n</span></code> (<code class="docutils literal notranslate"><span class="pre">--dry-run</span></code>) prints out what would happen, but doesn’t do it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--update</span></code> skip files that are newer on the receiving end</p></li>
<li><p>To put files exactly where you want, I recommend giving two full
paths, both with a <code class="docutils literal notranslate"><span class="pre">/</span></code> on the end.</p></li>
</ul>
<p>It can go either way, but it <em>can’t</em> go between two remotes.</p>
<div class="admonition-demonstration-of-rsync demo admonition" id="demo-1">
<p class="admonition-title">Demonstration of rsync</p>
<p>Syncing a directory from one place to another.  Show rsync from
command line</p>
</div>
<div class="admonition-homework-rsync exercise important admonition" id="exercise-0">
<p class="admonition-title">Homework: rsync</p>
<ol class="arabic simple">
<li><p>Install rsync if you don’t already have it (It is in all package
managers on Linux.  It’s default on MacOS.  I’m not sure the best
option on Windows, but it is possible.  And it’s almost certainly
on any HPC cluster out there.)</p></li>
</ol>
<p>Do the following, and as your assignment, save all of the console log.</p>
<ol class="arabic simple" start="2">
<li><p>Find, or make, a directory with 5-10 files in it.  (You can have
more, but 5-10 keeps the console logs more reasonable.  Your choice.)</p></li>
<li><p>Rsync the directory from one computer to the cluster, using <code class="docutils literal notranslate"><span class="pre">-rtiv</span></code></p></li>
<li><p>Modify one file and re-run rsync (still using <code class="docutils literal notranslate"><span class="pre">-rtiv</span></code>) option, and
verify that only the modified file is transferred.</p></li>
</ol>
<p>At each step, write (in your own free-form words) what is happening.
Include your console input and output in your submission.</p>
</div>
</section>
</section>
<section id="syncing-data-two-ways">
<h2>Syncing data two-ways<a class="headerlink" href="#syncing-data-two-ways" title="Permalink to this heading"></a></h2>
<p>By it’s nature, <em>it has to keep records of the last state on each
side, so it knows which side is most recently updated, or if BOTH have
been updated</em> - protect these state files or you have to resolve
everything again.</p>
<p>If you need more than two ends, make a star topology.</p>
<section id="unison-syncing-data">
<h3>Unison: syncing data<a class="headerlink" href="#unison-syncing-data" title="Permalink to this heading"></a></h3>
<p>Unison is a program that does bi-directional syncing.  It uses the
rsync protocol to do the actual transfers.  (There are multiple things
called unison, this is https://www.cis.upenn.edu/~bcpierce/unison/ and
https://github.com/bcpierce00/unison and <em>not</em> Intel Unison.</p>
<p>Unison has to be installed on both sides.  Since recently, the version
numbers don’t have to exactly match.  You can download and use a
static binary.  It has a GPU that is good for seeing and resolving
changes, and a command line interface.</p>
<section id="using-unison">
<h4>Using unison<a class="headerlink" href="#using-unison" title="Permalink to this heading"></a></h4>
<p>The basic syntax looks like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>unison<span class="w"> </span>word-count/<span class="w"> </span>ssh://HOSTNAME//full/path/to/word-count/
<span class="gp">$ </span>unison<span class="w"> </span>word-count/<span class="w"> </span>ssh://HOSTNAME/relative/path/to/word-count/
</pre></div>
</div>
<p>Useful options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-servercmd</span> <span class="pre">PATH</span></code> tells a path to unison on the remote end (if it’s
not in <code class="docutils literal notranslate"><span class="pre">$PATH</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unison-gtk</span></code> provides a graphical application which makes resolving
conflicts quite nice, including diffing them.</p></li>
</ul>
<p>It stores the state files in <code class="docutils literal notranslate"><span class="pre">~/.unison/</span></code> on both ends.</p>
<div class="admonition-demonstration-of-unison demo admonition" id="demo-2">
<p class="admonition-title">Demonstration of unison</p>
<p>Syncing a directory from one place to another.  Show Unison from
command line without profiles</p>
</div>
<div class="admonition-homework-unison exercise important admonition" id="exercise-1">
<p class="admonition-title">Homework: unison</p>
<ol class="arabic simple">
<li><p>Install unison on your computer and the HPC cluster.</p>
<ul class="simple">
<li><p>On Linux it’s likely to be in package managers, but only versions
2.52 and higher support syncing without local and remote being
the exact same versions.  Check this first (2.52+ is in Debian
stable but not Ubuntu 22.04 LTS, for example).</p></li>
<li><p>There are downloads for other operating systems on the <a class="reference external" href="https://github.com/bcpierce00/unison/releases">releases
page</a>.</p></li>
<li><p>You probably need to install it on the cluster yourself.  On the
<a class="reference external" href="https://github.com/bcpierce00/unison/releases">releases page</a>,
the <code class="docutils literal notranslate"><span class="pre">unison-XXXXXX-ubuntu-x86_64-static.tar.gz</span> </code> is statically
built and thus probably works on your cluster.  Download and copy
just the <code class="docutils literal notranslate"><span class="pre">bin/unison</span></code> program over - that is all that’s needed.
Use <code class="docutils literal notranslate"><span class="pre">-servercmd</span> <span class="pre">path/to/unison</span></code> to tell where to find it.</p></li>
</ul>
</li>
<li><p>Sync one directory</p></li>
<li><p>Modify two different files (one on each end) and re-sync</p></li>
<li><p>Modify the same file on both ends. Re-sync and see how it doesn’t
touch that file until you specify how to resolve the conflict.</p></li>
</ol>
<p>Send all the commands you ran, their console outputs, and reflections
on what each step was doing (free-form text)</p>
</div>
</section>
</section>
</section>
<section id="git-annex">
<h2>git-annex<a class="headerlink" href="#git-annex" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://git-annex.branchable.com/">git-annex</a> lets git track large
files, but it <em>doesn’t</em> store the contents of the files in the git
history: instead, there are other commands that move the files
directly from remote to remote. (<code class="docutils literal notranslate"><span class="pre">dvc</span></code> is similar)</p>
<p>git-annex is nice for some cases, but it can be rather hard to use.
Aalto SciComp has a <a class="reference external" href="https://scicomp.aalto.fi/scicomp/git-annex/">git-annex guide for
scientists</a>, which
explains things slightly more usably.</p>
<p>Installation: Linux package manager, conda-forge, or download from the
website.</p>
<p>Personal opinion (RD): Ask for help if you want to set it up.  It
should probably be used more than it is, but for now let’s consider it
a specialist’s tool.</p>
<div class="admonition-demo demo admonition" id="demo-3">
<p class="admonition-title">Demo</p>
<ul>
<li><p>Show the CodeRefinery <a class="reference external" href="https://github.com/coderefinery/video-processing">video-processing
repository</a>.  You
can see this online, but the online version doesn’t include the files.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>video/video-processing
</pre></div>
</div>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">git-annex</span> <span class="pre">list</span></code> in it to see the files:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>annex<span class="w"> </span>list<span class="w"> </span>ttt4hpc-2024/
<span class="go">here</span>
<span class="go">|origin</span>
<span class="go">||triton</span>
<span class="go">|||allas</span>
<span class="go">||||web</span>
<span class="go">|||||bittorrent</span>
<span class="go">||||||</span>
<span class="go">X_XX__ ttt4hpc-2024/out/day1-intro.mkv</span>
<span class="go">X_XX__ ttt4hpc-2024/out/day1-io.mkv</span>
<span class="go">X_XX__ ttt4hpc-2024/out/day1-resources.mkv</span>
<span class="go">X_XX__ ttt4hpc-2024/out/day1.1-icebreaker.mkv</span>
<span class="go">X_X___ ttt4hpc-2024/raw/day1-obs.mkv</span>
</pre></div>
</div>
<p>This shows that the ttt4hpc-2024 videos are “here” (my desktop), on
<code class="docutils literal notranslate"><span class="pre">triton</span></code> (the cluster), and the processed videos (<code class="docutils literal notranslate"><span class="pre">out/</span></code>) are in
Allas (a national S3 object storage).</p>
</li>
<li><p>Get a video.  This repository is set to auto-init the S3 special
remote, so you can download videos without YouTube.  You can even
help improve the captions if there was something wrong (or if you
are fast enough, help with the processing after the course by
writing descriptions or debugging captions).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>annex<span class="w"> </span>get<span class="w"> </span>ttt4hpc-2024/out/day1.1-icebreaker.mkv
<span class="go">get ttt4hpc-2024/out/day1.1-icebreaker.mkv (from allas...)</span>

<span class="gp gp-VirtualEnv">(checksum...)</span> <span class="go">ok</span>
<span class="gp gp-VirtualEnv">(recording state in git...)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition-homework-git-annex-optional-advanced exercise important admonition" id="exercise-2">
<p class="admonition-title">Homework: git-annex (optional, advanced)</p>
<p>This exercise is advanced and thus not recommended for most people.</p>
<ol class="arabic simple">
<li><p>Install git-annex</p></li>
<li><p>Clone the <a class="reference external" href="https://github.com/coderefinery/video-processing">video-processing repository</a>.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">git-annex</span> <span class="pre">init</span></code> to set up your copy for git-annex (no date is
sent anywhere else)</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">git-annex</span> <span class="pre">list</span></code> and see what files are available for getting
(all the files are also broken symbolic links)</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">git-annex</span> <span class="pre">get</span> <span class="pre">FILENAME</span></code> and see it appear.</p></li>
<li><p>Figure out how git-annex knows where to automatically store every file.
Hint: check the git-annex manual page.  List the rules that exist
for the “triton” and “allas” remotes.</p></li>
</ol>
<p>Then, try to make your own repository (you’ll need to follow the <a class="reference external" href="https://git-annex.branchable.com/walkthrough/">walkthrough</a>:</p>
<ol class="arabic simple" start="7">
<li><p>Create a new git repository</p></li>
<li><p>Initialize git-annex inside of it</p></li>
<li><p>Add a file to git-annex</p></li>
<li><p>See how the directory changed (<code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span></code>)</p></li>
</ol>
</div>
</section>
<section id="mounting-data-from-place-to-place">
<h2>Mounting data from place to place<a class="headerlink" href="#mounting-data-from-place-to-place" title="Permalink to this heading"></a></h2>
<p>You can mount data and use it from one place to another: it becomes
two views of the same data.</p>
<ul class="simple">
<li><p>Data isn’t copied, but a view is made (technical term: filesystem mount)</p></li>
<li><p>Commonly used within internal networks (this is how all files on all nodes on a cluster look the same)</p></li>
<li><p>Useful for (for example) viewing output figures and so on.</p></li>
<li><p>Common and easy to use: sshfs (it uses ssh!)</p></li>
<li><p>These are as slow as the internet connection between the files.
Userspace tools like sshfs are even slower.</p></li>
</ul>
<div class="admonition-demo demo admonition" id="demo-4">
<p class="admonition-title">Demo</p>
<p>We will show SSHFS from desktop to cluster.  This assumes I’ve made
the directory <code class="docutils literal notranslate"><span class="pre">mnt/triton/</span></code> (my <code class="docutils literal notranslate"><span class="pre">$HOME/mnt/</span></code> directory contains places
for all the things I usually sshfs mount).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span><span class="c1"># This mounts the relative directory git/ , which is $HOME/git/</span>
<span class="gp">$ </span>sshfs<span class="w"> </span>triton:git/<span class="w"> </span>mnt/triton/

<span class="gp">$ </span>ls<span class="w"> </span>mnt/triton<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-3
<span class="go">clean-shell/</span>
<span class="go">envkernel/</span>
<span class="go">fancyquota/</span>
</pre></div>
</div>
</div>
<div class="admonition-homework-sshfs exercise important admonition" id="exercise-3">
<p class="admonition-title">Homework: sshfs</p>
<ol class="arabic simple">
<li><p>Install SSHFS on whatever computer you use for daily local work.</p>
<ul class="simple">
<li><p>You’ll have to figure out if this is easy (it might not be
possible).</p></li>
</ul>
</li>
<li><p>SSHFS mount a remote directory that has a large file in it. (you
can make a 1GB file with <code class="docutils literal notranslate"><span class="pre">dd</span> <span class="pre">if=/dev/urandom</span> <span class="pre">of=some_file</span> <span class="pre">bs=1M</span> <span class="pre">count=1000</span></code>)</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">md5sum</span></code> (or some other checksum program) on both the
mounted file, and via ssh to the cluster.</p></li>
<li><p>How does the run time compare on the sshfs mounted file, and
directly on the cluster?  How fast of network speed should you have
between your computer and the cluster?</p></li>
</ol>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading"></a></h2>
<p>There are three main ways of transferring data, and each has its own place:</p>
<ul class="simple">
<li><p>Copy data one-way</p></li>
<li><p>Synchronize data two-ways</p></li>
<li><p>Do a filesystem mount (sshfs) to make another view of the same data</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Project_arrangement/" class="btn btn-neutral float-left" title="Project arrangement" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Code_sync/" class="btn btn-neutral float-right" title="Code sync" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024-, The contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>